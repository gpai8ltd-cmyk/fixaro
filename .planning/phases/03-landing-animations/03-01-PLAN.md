---
phase: 03-landing-animations
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - tools-shop/package.json
  - tools-shop/src/hooks/usePrefersReducedMotion.ts
  - tools-shop/src/components/AnimatedSection.tsx
  - tools-shop/src/app/globals.css
autonomous: true

must_haves:
  truths:
    - "AnimatedSection component fades in children when scrolled into view"
    - "usePrefersReducedMotion hook returns true when user prefers reduced motion"
    - "Blob keyframes defined in globals.css for morphing animation"
    - "All new animations respect prefers-reduced-motion media query"
  artifacts:
    - path: "tools-shop/src/hooks/usePrefersReducedMotion.ts"
      provides: "Motion preference detection hook"
      exports: ["default"]
    - path: "tools-shop/src/components/AnimatedSection.tsx"
      provides: "Scroll-reveal wrapper component"
      exports: ["default"]
    - path: "tools-shop/src/app/globals.css"
      provides: "Blob morph keyframes"
      contains: "@keyframes blob-morph"
  key_links:
    - from: "AnimatedSection.tsx"
      to: "react-intersection-observer"
      via: "useInView hook"
      pattern: "useInView"
    - from: "globals.css blob keyframes"
      to: "prefers-reduced-motion"
      via: "media query disables animation"
      pattern: "@media.*prefers-reduced-motion"
---

<objective>
Set up animation foundation: install dependencies, create reusable hooks and components for scroll animations.

Purpose: All subsequent landing page sections depend on AnimatedSection for scroll-reveal and usePrefersReducedMotion for accessibility. This plan establishes the animation infrastructure.

Output: Reusable animation components ready for landing page sections.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-landing-animations/03-RESEARCH.md

# Existing files to modify
@tools-shop/src/app/globals.css
@tools-shop/package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install animation dependencies</name>
  <files>tools-shop/package.json</files>
  <action>
Install required npm packages:
```bash
cd tools-shop && npm install react-intersection-observer react-countup
```

These provide:
- `react-intersection-observer`: useInView hook for scroll detection
- `react-countup`: Animated number counters with scroll spy

Do NOT use: framer-motion, gsap, or other heavy animation libraries (per research recommendation).
  </action>
  <verify>
Run `npm ls react-intersection-observer react-countup` - both should show installed versions.
Check package.json contains both dependencies.
  </verify>
  <done>Both packages listed in package.json dependencies, npm install succeeds without errors.</done>
</task>

<task type="auto">
  <name>Task 2: Create motion preference hook and AnimatedSection component</name>
  <files>
    tools-shop/src/hooks/usePrefersReducedMotion.ts
    tools-shop/src/components/AnimatedSection.tsx
  </files>
  <action>
Create hooks directory and usePrefersReducedMotion hook:

```typescript
// tools-shop/src/hooks/usePrefersReducedMotion.ts
'use client';

import { useEffect, useState } from 'react';

export default function usePrefersReducedMotion() {
  // Default to true (reduced motion) for SSR safety
  const [prefersReducedMotion, setPrefersReducedMotion] = useState(true);

  useEffect(() => {
    const mediaQueryList = window.matchMedia('(prefers-reduced-motion: no-preference)');
    // If user has no preference, they're OK with motion (so reduced = false)
    setPrefersReducedMotion(!mediaQueryList.matches);

    const listener = (event: MediaQueryListEvent) => {
      setPrefersReducedMotion(!event.matches);
    };

    mediaQueryList.addEventListener('change', listener);
    return () => mediaQueryList.removeEventListener('change', listener);
  }, []);

  return prefersReducedMotion;
}
```

Create AnimatedSection component:

```typescript
// tools-shop/src/components/AnimatedSection.tsx
'use client';

import { useInView } from 'react-intersection-observer';
import { ReactNode } from 'react';

interface AnimatedSectionProps {
  children: ReactNode;
  className?: string;
  threshold?: number;
  triggerOnce?: boolean;
  delay?: number; // delay in ms for staggered animations
}

export default function AnimatedSection({
  children,
  className = '',
  threshold = 0.1,
  triggerOnce = true,
  delay = 0
}: AnimatedSectionProps) {
  const { ref, inView } = useInView({
    threshold,
    triggerOnce,
  });

  return (
    <div
      ref={ref}
      className={`transition-all duration-700 ease-out ${
        inView
          ? 'opacity-100 translate-y-0'
          : 'opacity-0 translate-y-8'
      } ${className}`}
      style={{ transitionDelay: `${delay}ms` }}
    >
      {children}
    </div>
  );
}
```

Key points:
- Both are 'use client' components
- usePrefersReducedMotion defaults to true for SSR (safe default)
- AnimatedSection uses triggerOnce=true to prevent re-animation on scroll up
- delay prop allows staggered animations for multiple items
  </action>
  <verify>
1. Check file exists: `ls tools-shop/src/hooks/usePrefersReducedMotion.ts`
2. Check file exists: `ls tools-shop/src/components/AnimatedSection.tsx`
3. TypeScript compiles: `cd tools-shop && npx tsc --noEmit` (no errors related to these files)
  </verify>
  <done>
- usePrefersReducedMotion.ts exports default hook
- AnimatedSection.tsx exports default component with useInView integration
- Both files have 'use client' directive
- No TypeScript errors
  </done>
</task>

<task type="auto">
  <name>Task 3: Add blob animation keyframes to globals.css</name>
  <files>tools-shop/src/app/globals.css</files>
  <action>
Add new CSS classes and keyframes to globals.css (append after existing animations around line 175):

```css
/* Gradient blob animation for hero */
.gradient-blob {
  position: absolute;
  border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
  animation: blob-morph 8s ease-in-out infinite;
  filter: blur(40px);
  opacity: 0.6;
}

.gradient-blob-1 {
  width: 400px;
  height: 400px;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  top: -100px;
  right: -100px;
}

.gradient-blob-2 {
  width: 300px;
  height: 300px;
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
  bottom: -50px;
  left: -50px;
  animation-delay: -4s;
}

@keyframes blob-morph {
  0%, 100% {
    border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
    transform: translate(0, 0) scale(1);
  }
  33% {
    border-radius: 70% 30% 50% 50% / 30% 60% 40% 70%;
    transform: translate(30px, -50px) scale(1.1);
  }
  66% {
    border-radius: 40% 60% 70% 30% / 50% 40% 60% 50%;
    transform: translate(-20px, 20px) scale(0.95);
  }
}

/* Enhanced card hover for landing sections */
.card-hover-enhanced {
  transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
}

.card-hover-enhanced:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
              0 0 0 2px var(--primary);
  border-color: var(--primary);
}

/* Floating animation variation for icons */
.animate-float-delayed {
  animation: float 3s ease-in-out infinite;
  animation-delay: 0.5s;
}

.animate-float-slow {
  animation: float 4s ease-in-out infinite;
}
```

ALSO update the existing prefers-reduced-motion media query (around line 55-64) to include blob animations:

```css
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .gradient-blob {
    display: none; /* Hide blobs entirely for reduced motion */
  }
}
```

Key points:
- Use blur(40px) not blur(60px) per research for mobile performance
- Only 2 blobs, not more (performance)
- blob-morph uses transform only (GPU accelerated)
- card-hover-enhanced extends existing pattern for new sections
- prefers-reduced-motion hides blobs entirely (per research recommendation)
  </action>
  <verify>
1. Grep for keyframes: `grep "blob-morph" tools-shop/src/app/globals.css`
2. Grep for reduced motion blob rule: `grep -A2 "gradient-blob" tools-shop/src/app/globals.css | grep "display: none"`
3. Dev server starts without CSS errors: `cd tools-shop && npm run dev` (check console)
  </verify>
  <done>
- @keyframes blob-morph exists with transform-based animation
- .gradient-blob, .gradient-blob-1, .gradient-blob-2 classes defined
- .card-hover-enhanced class defined with lift + scale + glow
- prefers-reduced-motion hides .gradient-blob
- No CSS syntax errors
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm ls react-intersection-observer react-countup` shows both packages
2. `ls tools-shop/src/hooks/usePrefersReducedMotion.ts` - file exists
3. `ls tools-shop/src/components/AnimatedSection.tsx` - file exists
4. `grep "blob-morph" tools-shop/src/app/globals.css` - keyframes exist
5. `cd tools-shop && npm run build` - builds without errors
</verification>

<success_criteria>
1. Dependencies installed (react-intersection-observer, react-countup)
2. usePrefersReducedMotion hook created and exports default function
3. AnimatedSection component created with useInView integration
4. Blob animation keyframes added to globals.css
5. All animations respect prefers-reduced-motion
6. Build succeeds without errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-landing-animations/03-01-SUMMARY.md`
</output>
